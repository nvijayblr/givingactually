<section class="common-page-slider">
  <!-- [ngStyle]="{'background-image': 'url(' + campaign.BDisplayPicPath + ')'}" -->
  <div class="slider-bg" [ngStyle]="{'background-image': 'url(' + campaign.BDisplayPicPath + ')'}">
    <div class="container">
      <h2 class="title">{{campaign.CampaignTitle}}</h2>
      <div class="btn-wrapper">
        <button mat-stroked-button class="gv-secondary-btn transparent rounded">Donate Now</button>
      </div>
    </div>
  </div>
</section>

<section class="gv-page-body">
  <div class="container">
    <div class="breadcrumb-wrapper">
      <ul class="breadcrumb">
        <li><a routerLink="/home" title="Home">Home <mat-icon>keyboard_arrow_right</mat-icon></a></li>
        <li><a routerLink="/category/{{campaign.CategoryName}}" title="{{campaign.CategoryName}}">{{campaign.CategoryName}} <mat-icon>keyboard_arrow_right</mat-icon></a></li>
        <li><span itemprop="name">{{campaign.CampaignTitle}}</span></li>
      </ul>
    </div>

    <app-progress-bar message="Loading Campaigns..." *ngIf="isLoading"></app-progress-bar>

    <div class="row" *ngIf="!isLoading">

      <!-- Campaign Panel -->
      <div class="col-xs-12 col-sm-4 col-md-8">
        <div class="image-carousel">
          <owl-carousel-o [options]="OwlOptions" style="height: 400px;">
            <ng-template carouselSlide *ngFor="let image of campaign.UploadedImages">
              <div class="img-bg" [ngStyle]="{'background-image': 'url(' + image.FilePath + ')'}"></div>
            </ng-template>  
          </owl-carousel-o>
        </div>

        <!-- User Info -->
        <div class="row campaign-user-info">
          <div class="col-xs-12 col-sm-4 col-md-6 user-email">
            <i class="fa fa-envelope"></i>
            <a href="mailto:{{campaign.CreatedBy}}" target="_blank">{{campaign.CreatedBy}}</a>
          </div>
          <div class="col-xs-12 col-sm-4 col-md-6 cagegory">
            <!-- Social Share -->
            <div class="social-share-wrapper">
              <button mat-stroked-button class="like-button"><i class="fa fa-thumbs-up"></i> Like</button>
              <span class="social whatsapp" shareButton="whatsapp"><i class="fa fa-whatsapp"></i></span>
              <span class="social facebook" shareButton="facebook"><i class="fa fa-facebook"></i></span>
              <span class="social twitter" shareButton="twitter"><i class="fa fa-twitter"></i></span>
              <span class="social linkedin" shareButton="linkedin"><i class="fa fa-linkedin"></i></span>
              <span class="social pinterest" shareButton="pinterest"><i class="fa fa-pinterest"></i></span>
              <span class="social email" shareButton="email"><i class="fa fa-envelope-o"></i></span>
            </div>
          </div>
        </div>

        <!-- Campaign Content -->
        <div class="campain-section">
          <h3 class="title">{{campaign.CampaignTitle}}</h3>
          <div class="campaign-content" [ngClass]="{'full-height': isReadMore}">
            <div class="desc" [innerHTML]="campaign.campaignDescription.StripedDescription"></div>
            <div class="desc" [innerHTML]="campaign.campaignDescription.StoryDescription"></div>
            <div class="read-more-bg">
              <button mat-stroked-button class="gv-secondary-btn rounded read-more" (click)="onReadMore()">
                {{isReadMore ? 'Read Less' : 'Read More'}}
              </button>              
            </div>
          </div>
        </div>

        <!-- Updates Tab -->
        <mat-card class="updates-section" *ngIf="campaign.Updates.length">
          <h3 class="sub-title">Campaign Updates ({{campaign.Updates.length}})</h3>
          <div class="updates-itesm">
            <mat-tab-group>  
              <mat-tab *ngFor="let updates of campaign.Updates" label="{{formatDate(updates.updatedOn)}}">
                <div class="desc" [innerHTML]="updates.UpdateDescription.StoryDescription"></div>
              </mat-tab>
            </mat-tab-group>
          </div>
        </mat-card>
        
        <!-- Comments -->
        <mat-card class="comments-section" *ngIf="campaign.Comments.length">
          <h3 class="sub-title">Comments ({{campaign.Comments.length}})</h3>
          <div class="comments-wrapper">
            <div class="comment-item" *ngFor="let comment of campaign?.Comments">
              <div class="comment-item-wrapper clearfix">
                <div class="comment-msg">
                  <div class="comment">{{comment.CommentMsg}}</div>
                  <div class="user-name">
                    {{comment.Users.DisplayName ? comment.Users.DisplayName : comment.Users.UserName}},
                    <span class="date">{{comment.Users.NGOAddress}}.</span>
                    <span class="date">{{formatDate(comment.CommentedDate)}}</span>
                  </div>
                </div>
                <div class="user-img">{{getFirstLetter(comment.Users.DisplayName)}}</div>
              </div>
            </div>
          </div>
        </mat-card>

        <!-- Comments -->
        <mat-card class="comments-section" *ngIf="campaign.Comments.length">
          <div class="row">
            <div class="col-xs-12 col-sm-4 col-md-6">
              <h3 class="sub-title">Comments 
                <span *ngIf="campaign.Comments.length">({{curComment}} of {{campaign.Comments.length}})</span>
              </h3>
            </div>
            <div class="col-xs-12 col-sm-4 col-md-6 text-right">
              <button mat-stroked-button class="gv-secondary-btn prev-next-btn" (click)="owlCommentCar.prev()">
                <mat-icon>keyboard_arrow_left</mat-icon>
              </button>
              <button mat-stroked-button class="gv-secondary-btn prev-next-btn" (click)="owlCommentCar.next()">
                <mat-icon>keyboard_arrow_right</mat-icon>
              </button>
            </div>
          </div>
          <div class="comments-wrapper">
            <owl-carousel-o [options]="OwlCommentsOptions" #owlCommentCar (translated)="onCommentsChanges($event)">
              <ng-template carouselSlide  *ngFor="let comment of campaign?.Comments">
                <div class="comment-item">
                  <div class="comment-item-wrapper clearfix">
                    <div class="comment-msg">
                      <div class="comment">{{comment.CommentMsg}}</div>
                      <div class="user-name">
                        {{comment.Users.DisplayName ? comment.Users.DisplayName : comment.Users.UserName}},
                        <span class="date">{{comment.Users.NGOAddress}}.</span>
                        <span class="date">{{formatDate(comment.CommentedDate)}}</span>
                      </div>
                    </div>
                    <div class="user-img">{{getFirstLetter(comment.Users.DisplayName)}}</div>
                  </div>
                </div>
              </ng-template>
            </owl-carousel-o>
          </div>
        </mat-card>


      </div>
      <!-- End of Campaign Panel -->


      <!-- Right Panel -->
      <div class="col-xs-12 col-sm-4 col-md-4">
        <!-- Campaign Info -->
        <mat-card class="no-padding">
          <div class="support-box campaign">
            <div class="row">
              <div class="col-md-12">
                <div class="funded-chart">
                  <div class="goals">
                    <div class="funded" [ngStyle]="{'width': campaign.RaisedPercentage + '%'}"></div>
                  </div>
                  <p class="label">{{campaign.RaisedPercentage}}% AMOUNT ACHIEVED OF ₹{{toLocaleString(campaign.CampaignTargetMoney)}}</p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="inner-box-left">
                  <h4>₹ {{toLocaleString(campaign.RaisedAmount)}}</h4>
                  <p class="label">Money Raised</p>
                </div>
                <div class="inner-box">
                  <h4>{{campaign.CampaignDonationList.length}}</h4>
                  <p class="label">Donors</p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="inner-box-right">
                  <h4>₹ {{toLocaleString(campaign.CampaignTargetMoney)}}</h4>
                  <p class="label">Goal</p>
                </div>
                <div class="inner-box">
                  <h4>{{campaign?.EndorsementsList.EndCount}}</h4>
                  <p class="label">Endorsements</p>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-4 right-border">
                <div class="inner-box-border">
                  <h4>{{campaign.LikeCount}}</h4>
                  <p class="label">Likes</p>
                  <i class="fa fa-thumbs-up"></i>
                </div>
              </div>
              <div class="col-md-4 right-border">
                <div class="inner-box-border">
                  <h4>{{campaign.CommentCount}}</h4>
                  <p class="label">Comments</p>
                  <i class="fa fa-comments"></i>
                </div>
              </div>
              <div class="col-md-4">
                <div class="inner-box-border">
                  <h4>{{campaign.sharecount}}</h4>
                  <p class="label">Shares</p>
                  <i class="fa fa-share"></i>
                </div>
              </div>
            </div>
            <div class="center btn-wrapper">
              <button mat-stroked-button class="gv-secondary-btn rounded">Donate Now</button>
            </div>
          </div>
        </mat-card>
        <!-- User Info -->

        <!-- Campainer Owner -->
        <mat-card class="benificiary-section">
          <h3 class="sub-title">Benificiary</h3>

          <div class="support-box user">
            <a href="" class="user-img">
              {{getFirstLetter(campaign.BenificiaryName)}}
            </a>
            <div class="user-info">
              <a href="" class="user-name">
                <h3 class="s-user">{{campaign.BenificiaryName ? campaign.BenificiaryName : '-'}}</h3>
              </a>
              <p class="s-loc">
                <i class="fa fa-map-marker"></i>
                <span>{{campaign.CampainOrganizer?.placeNmae}}</span>
              </p>
              <p class="s-email">
                <i class="fa fa-envelope"></i>
                <a href="mailto:{{campaign.CreatedBy}}" target="_blank">{{campaign.CreatedBy}}</a>
              </p>
            </div>
          </div>
        </mat-card>

        <!-- Top Donors -->
        <mat-card *ngIf="campaign.CampaignDonationList.length">
          <div class="top-donors-section">
            <h3 class="sub-title">Top Donors</h3>
            <div class="donor-item clearfix" *ngFor="let donor of campaign.CampaignDonationList">
              <a href="" class="donor-img">{{getFirstLetter(donor.DonatedBy)}}</a>
              <div class="user-info">
                <div class="user-name">
                  <h3 class="s-user">{{donor.DonatedBy}}</h3>
                </div>
                <p class="donor-amount">
                  <span>₹ {{toLocaleString(donor.DonationAmnt)}}</span>
                </p>
              </div>
            </div>
            <div class="view-more-wrapper">
              <a href="" class="view-more">View All</a>
            </div>
          </div>
        </mat-card>        


        <!-- Endorsements List -->
        <mat-card *ngIf="campaign.EndorsementsList.endList.length">
          <div class="top-donors-section">
            <h3 class="sub-title">Endorsements</h3>
            <div class="donor-item clearfix" *ngFor="let endorsment of campaign.EndorsementsList.endList">
              <div class="user-info">
                <div class="user-name">
                  <h3 class="s-user">{{endorsment.NGOName}}</h3>
                </div>
                <p class="donor-address">
                  <span *ngIf="endorsment.NGOType">{{endorsment.NGOType}} | </span>
                  <span *ngIf="endorsment.NGOSector">{{endorsment.NGOSector}} | </span>
                  <span *ngIf="endorsment.NGOAddress">{{endorsment.NGOAddress}}</span>
                </p>
              </div>
            </div>
            <div class="view-more-wrapper">
              <a href="" class="view-more">View All</a>
            </div>
          </div>
        </mat-card>        

      </div>
    </div>


  </div>
</section>
